<script type="text/javascript"
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAeLJnNUGtgDxQkx-5wrQR7YeY4-jd5sLI&libraries=geometry,places,panoramio,drawing&sensor=true">
</script>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>

 <span id='markerData'> <%= @markerData %></span>

<script type='text/javascript'>

  var markerData = $.parseJSON($("#markerData").text())

  window.markersOnMap = [];

  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(48.856614, 2.3522219000000177 ),
      zoom: 17,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    window.map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);

    for (var i = markerData.length - 1; i >= 0; i--) {
      var place = markerData[i];
      var placeLatLong = new google.maps.LatLng(place.latitude, place.longitude);
      var marker = new google.maps.Marker({
        position: placeLatLong,
        map: window.map,
        title: place.name
      });

      var infowindow = new google.maps.InfoWindow({
        content: place.name
      });

      google.maps.event.addListener(marker, 'click', function() {
        infowindow.open(marker.get('map'), marker);
      });
      markersOnMap.push(place.name);
    };
  };
  google.maps.event.addDomListener(window, 'load', initialize);
</script>

<div id="map-canvas" style="width: 100%; height: 100%"></div>